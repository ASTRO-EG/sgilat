<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุณุฌูุงุช ุงููุทุจุฎ ุงูุฑุฆูุณู</title>
    
    <meta name="theme-color" content="#007bff">
    <link rel="apple-touch-icon" href="https://i.ibb.co/0jRJCBmL/111.jpg">
    <link rel="icon" href="https://i.ibb.co/0jRJCBmL/111.jpg">
    
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* --- ุฃููุงุท ุงูุซูู ุงูุนุงู (ุนุตุฑู) --- */
        :root {
            --primary-color: #007bff; /* ุฃุฒุฑู ููู ูุนุตุฑู */
            --secondary-color: #6c757d; /* ุฑูุงุฏู ูุงุฏุฆ */
            --accent-color: #17a2b8; /* ุณูุงูู ููุชุฃููุฏ */
            --success-color: #28a745; /* ุฃุฎุถุฑ ูููุฌุงุญ */
            --danger-color: #dc3545; /* ุฃุญูุฑ ููุฎุทุฑ/ุงูุญุฐู */
            --text-dark: #343a40;
            --text-light: #fff;
            --bg-light: #f8f9fa; /* ุฎูููุฉ ุฎูููุฉ ุฌุฏุงู */
            --card-bg: #ffffff;
            --border-color: #e9ecef;
            --radius: 8px;
        }

        body {
            font-family: 'Cairo', sans-serif;
            color: var(--text-dark);
            margin: 0;
            padding: 0;
            direction: rtl; 
            text-align: right;
            min-height: 100vh;
            display: flex; 
            flex-direction: column;
            background-color: var(--bg-light); 
        }

        /* --- ูุงุฌูุฉ ุงูุชุทุจูู ุงูุฑุฆูุณูุฉ (ุจุนุฏ ุงูุฏุฎูู) --- */
        #app-container {
            display: none; /* ูุฎูู ูุจุฏุฆูุงู */
            width: 100%;
            flex-grow: 1;
        }

        .container {
            max-width: 1300px; 
            margin: 30px auto;
            background: var(--card-bg);
            padding: 40px;
            border-radius: var(--radius);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08); 
            flex-grow: 1; 
        }

        h1 {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            padding-bottom: 15px;
            margin-bottom: 40px;
            text-align: center;
            font-size: 2.5em;
            font-weight: 700;
        }

        h2 {
            color: var(--text-dark);
            background-color: var(--border-color);
            padding: 12px 15px;
            margin-top: 35px;
            margin-bottom: 25px;
            font-size: 1.5em;
            border-radius: var(--radius);
            border-right: 5px solid var(--primary-color);
        }
        
        /* --- ูุงุฌูุฉ ุชุณุฌูู ุงูุฏุฎูู (ููุก ุงูุดุงุดุฉ) --- */
        #login-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #eaf4ff, #ffffff);
            display: flex; 
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999; /* ูุถูุงู ุธููุฑูุง ููู ูู ุดูุก */
            text-align: center;
            padding: 20px;
        }

        .login-card {
            background: var(--card-bg);
            padding: 60px 40px;
            border-radius: 15px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 550px;
        }

        .login-card h2 {
            font-size: 1.8em;
            color: var(--primary-color);
            border: none;
            background: none;
            margin-bottom: 30px;
        }

        .login-btn {
            background-color: var(--primary-color);
            color: var(--text-light);
            padding: 15px 30px;
            border: none;
            border-radius: 50px; 
            cursor: pointer;
            font-size: 1.2em;
            font-weight: 600;
            margin: 10px 0;
            transition: all 0.3s ease; 
            width: 100%;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .login-btn:nth-child(2) {
            background-color: var(--accent-color);
        }

        .login-btn:hover {
            opacity: 0.9;
            transform: translateY(-3px) scale(1.01); 
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }
        
        /* --- ุฒุฑ ุชุณุฌูู ุงูุฎุฑูุฌ ุงูุฌุฏูุฏ --- */
        #logout-btn {
            position: fixed;
            top: 20px;
            left: 20px; /* Top left for RTL */
            z-index: 10000;
            background-color: var(--danger-color);
            color: var(--text-light);
            border: none;
            padding: 8px 12px;
            border-radius: 50px; /* Make it circular/pill shaped */
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(220, 53, 69, 0.4);
        }
        #logout-btn:hover {
            background-color: #c82333;
            transform: scale(1.05);
        }


        /* --- ูุงุฌูุฉ ุงูุชููู ุงูุฑุฆูุณูุฉ (ุงููุงุฆูุฉ) --- */
        #main-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            padding: 10px;
        }

        .menu-btn {
            background-color: var(--card-bg);
            color: var(--text-dark);
            border: 1px solid var(--border-color);
            padding: 30px 20px;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 1.2em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            text-align: center;
            border-left: 5px solid var(--primary-color);
        }

        .menu-btn:hover {
            background-color: #e9f5ff; 
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        /* --- ุดุฑูุท ุงููุถุนูุงุช (ุชู ุชุจุณูุทู ููุนุฑุถ ููุท) --- */
        .mode-toggle-bar {
            margin-bottom: 25px;
            padding: 15px;
            background: var(--border-color);
            border-radius: var(--radius);
            display: flex;
            justify-content: center;
            font-size: 1.1em;
            font-weight: 600;
            color: var(--text-dark);
        }
        
        .mode-toggle-bar .status-text {
            padding: 0 10px;
        }
        
        .back-to-menu-btn {
            background-color: var(--secondary-color); 
            color: var(--text-light);
            padding: 10px 20px;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 1em;
            margin-bottom: 20px;
            display: inline-block;
            transition: background-color 0.3s ease;
        }
        .back-to-menu-btn:hover {
            background-color: #5a6268;
        }

        /* --- ุชูุณูู ุงูููุงุฐุฌ (Forms) --- */
        .log-form-generic {
            background-color: #fff;
            border: 1px solid var(--border-color);
            padding: 30px;
            border-radius: var(--radius);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 40px;
        }

        .log-form-generic div {
            display: flex;
            flex-direction: column;
        }
        
        .log-form-generic label {
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary-color);
        }
        
        .log-form-generic input[type="text"], 
        .log-form-generic input[type="date"],
        .log-form-generic input[type="time"],
        .log-form-generic input[type="number"],
        .log-form-generic select {
            padding: 10px 12px;
            border: 1px solid #ced4da;
            border-radius: var(--radius);
            transition: border-color 0.3s, box-shadow 0.3s;
            background-color: var(--bg-light);
        }

        .log-form-generic input:focus,
        .log-form-generic select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
            outline: none;
        }

        .log-form-generic button[type="submit"] {
            background-color: var(--success-color);
            color: var(--text-light);
            padding: 12px 20px;
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 15px;
        }
        .log-form-generic button[type="submit"]:hover {
            background-color: #218838;
        }


        /* --- ุชูุณูู ุงูุฌุฏุงูู (Tables) --- */
        .log-table-generic {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            border-radius: var(--radius);
            width: 100%;
            border-collapse: collapse;
        }

        .log-table-generic th, .log-table-generic td {
            padding: 12px 10px;
            text-align: center;
        }

        .log-table-generic th {
            background-color: var(--primary-color);
            color: var(--text-light);
            font-weight: 700;
        }
        .log-table-generic td {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
        }

        .log-table-generic tbody tr:nth-child(even) td {
            background-color: #f6f6f6; 
        }

        /* ุฒุฑ ุงูุญุฐู ุฏุงุฎู ุงูุฌุฏูู */
        .delete-btn {
            background-color: var(--danger-color);
            color: var(--text-light);
            border: none;
            padding: 6px 10px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .delete-btn:hover {
            background-color: #c82333;
        }
        
        /* ุฅุฎูุงุก ูุงุฌูุงุช ุงูุณุฌูุงุช ุงูุชุฑุงุถูุงู */
        .log-page { display: none; }
        .admin-only { display: none; }
    </style>
</head>
<body>
    
    <div id="login-screen">
        <div class="login-card">
            <h2>๐ ุณุฌูุงุช ุงููุทุจุฎ ุงูุฑุฆูุณู</h2>
            <button class="login-btn" onclick="promptAdminLogin(false)">๐ค ุฏุฎูู ูุฒุงุฆุฑ</button>
            <button class="login-btn" onclick="promptAdminLogin(true)">๐ ุฏุฎูู ุขูู</button>
        </div>
    </div>


    <div id="app-container">
        <button id="logout-btn" onclick="logout()">๐ช ุฎุฑูุฌ</button>
        
        <div class="container">
            <h1>ุณุฌูุงุช ุงููุทุจุฎ ุงูุฑุฆูุณู</h1>

            <div id="main-page">
                <h2>ุงุฎุชูุงุฑ ุงูุณุฌู ุงููุทููุจ</h2>
                <div id="main-menu">
                    <button class="menu-btn" onclick="navigateToLog('fridge-temp-log')">๐ก๏ธ ุณุฌู ููุงุณ ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุงูุซูุงุฌุงุช</button>
                    <button class="menu-btn" onclick="navigateToLog('cooked-log')">๐ฅฉ ุณุฌู ุงููุทูู ูุงููุฌูุฒ ูุงููุชุจู</button>
                    <button class="menu-btn" onclick="navigateToLog('sanitation-log')">๐งผ ุณุฌู ุชูุธูู ูุชุนููู ุงููุนุฏุงุช</button>
                    <button class="menu-btn" onclick="navigateToLog('oil-disposal-log')">๐ง ุณุฌู ุฅุนุฏุงู ุงูุฒูุช</button>
                    <button class="menu-btn" onclick="navigateToLog('receipt-log')">๐ฆ ุณุฌู ูุฑุงูุจุฉ ุงูุงุณุชูุงู</button>
                    <button class="menu-btn" onclick="navigateToLog('car-temp-log')">๐ ุณุฌู ููุงุณ ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุงูุณูุงุฑุฉ</button>
                    <button class="menu-btn" onclick="navigateToLog('lectures-log')">๐ฃ๏ธ ุณุฌู ุงููุญุงุถุฑุงุช</button>
                    <button class="menu-btn" onclick="navigateToLog('thawing-log')">๐ง ุณุฌู ุชุณููุญ ุงููุญูุฉ ููุชุดุบูู</button>
                    <button class="menu-btn" onclick="navigateToLog('medical-log')">๐ค ุณุฌู ุงูุญุงูุงุช ุงููุฑุถูุฉ</button>
                    <button class="menu-btn" onclick="navigateToLog('returns-log')">โฉ๏ธ ุณุฌู ุงููุฑุชุฌุนุงุช</button>
                    <button class="menu-btn" onclick="navigateToLog('visitor-survey')">๐ ุงุณุชุจูุงู ุตุญุฉ ุงูุฒุงุฆุฑูู</button>
                </div>
            </div>

            <div id="fridge-temp-log" class="log-page">
                <button class="back-to-menu-btn" onclick="navigateToLog('main-page')">ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
                <div class="mode-toggle-bar">
                    <span style="color: var(--primary-color);">ุงููุถุน ุงูุญุงูู:</span>
                    <span class="status-text" id="fridge-temp-log-mode-status"></span>
                </div>
                <form id="fridge-temp-log-form" class="log-form-generic admin-only">
                    <h2>ุฅุถุงูุฉ ุณุฌู ุญุฑุงุฑุฉ ุซูุงุฌุฉ ุฌุฏูุฏ</h2>
                    <div><label for="ft-date">ุงูุชุงุฑูุฎ:</label><input type="date" id="ft-date" required></div>
                    <div><label for="ft-number">ุฑูู ุงูุซูุงุฌุฉ:</label><input type="number" id="ft-number" required min="1" placeholder="ูุซุงู: 1, 2, 3"></div>
                    <div><label for="ft-start">ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ (ุจุฏุงูุฉ ุงูููู):</label><input type="number" id="ft-start" required placeholder="ุจุงูุฏุฑุฌุฉ ุงููุฆููุฉ"></div>
                    <div><label for="ft-end">ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ (ููุงูุฉ ุงูููู):</label><input type="number" id="ft-end" required placeholder="ุจุงูุฏุฑุฌุฉ ุงููุฆููุฉ"></div>
                    <div><label for="ft-notes">ุงูููุงุญุธุงุช:</label><input type="text" id="ft-notes" placeholder="ููุงุญุธุงุช ุฅุถุงููุฉ"></div>
                    <button type="submit">ุชุณุฌูู ุงูุณุฌู</button>
                </form>
                <h2>ุณุฌูุงุช ุฏุฑุฌุงุช ุญุฑุงุฑุฉ ุงูุซูุงุฌุงุช ุงูุญุงููุฉ</h2>
                <div style="overflow-x: auto;"> 
                    <table id="fridge-temp-log-table" class="log-table-generic">
                        <thead>
                            <tr>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุฑูู ุงูุซูุงุฌุฉ</th>
                                <th>ุญุฑุงุฑุฉ (ุจุฏุงูุฉ ุงูููู)</th>
                                <th>ุญุฑุงุฑุฉ (ููุงูุฉ ุงูููู)</th>
                                <th>ุงูููุงุญุธุงุช</th>
                                <th class="action-cell admin-only">ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody id="fridge-temp-log-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="cooked-log" class="log-page">
                <button class="back-to-menu-btn" onclick="navigateToLog('main-page')">ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
                <div class="mode-toggle-bar">
                    <span style="color: var(--primary-color);">ุงููุถุน ุงูุญุงูู:</span>
                    <span class="status-text" id="cooked-log-mode-status"></span>
                </div>
                <form id="cooked-log-form" class="log-form-generic admin-only">
                    <h2>ุฅุถุงูุฉ ุณุฌู ูุทูู/ูุฌูุฒ ุฌุฏูุฏ</h2>
                    <div><label for="c-date">ุงูุชุงุฑูุฎ:</label><input type="date" id="c-date" required></div>
                    <div><label for="c-product">ููุน ุงูููุชุฌ:</label><select id="c-product" required><option value="ููุชู">ููุชู</option><option value="ุณุฌู">ุณุฌู</option><option value="ูุจุฏู">ูุจุฏู</option><option value="ุฑูุฒุจูู">ุฑูุฒุจูู</option><option value="ุดุงูุฑูู">ุดุงูุฑูู</option></select></div>
                    <div><label for="c-status">ุญุงูุฉ ุงูููุชุฌ:</label><select id="c-status" required><option value="ูุทูู">ูุทูู</option><option value="ูุชุจู">ูุชุจู</option><option value="ูุฌูุฒ">ูุฌูุฒ</option></select></div>
                    <div><label for="c-fire-temp">ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุนูู ุงููุงุฑ:</label><input type="number" id="c-fire-temp" required placeholder="ุจุงูุฏุฑุฌุฉ ุงููุฆููุฉ"></div>
                    <div><label for="c-fridge-temp">ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูู ุงูุซูุงุฌุฉ:</label><input type="number" id="c-fridge-temp" required placeholder="ุจุงูุฏุฑุฌุฉ ุงููุฆููุฉ"></div>
                    <div><label for="c-inspector">ุชู ุงููุญุต ุจูุงุณุทุฉ:</label><select id="c-inspector" required><option value="ุฏ.ุงููุงู">ุฏ.ุงููุงู</option></select></div>
                    <button type="submit">ุชุณุฌูู ุงูุณุฌู</button>
                </form>
                <h2>ุณุฌูุงุช ุงููุทูู ูุงููุฌูุฒ ูุงููุชุจู ุงูุญุงููุฉ</h2>
                <div style="overflow-x: auto;"> 
                    <table id="cooked-log-table" class="log-table-generic">
                        <thead>
                            <tr>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ููุน ุงูููุชุฌ</th>
                                <th>ุญุงูุฉ ุงูููุชุฌ</th>
                                <th>ุญุฑุงุฑุฉ ุงููุงุฑ</th>
                                <th>ุญุฑุงุฑุฉ ุงูุซูุงุฌุฉ</th>
                                <th>ุชู ุงููุญุต ุจูุงุณุทุฉ</th>
                                <th class="action-cell admin-only">ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody id="cooked-log-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="sanitation-log" class="log-page">
                <button class="back-to-menu-btn" onclick="navigateToLog('main-page')">ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
                <div class="mode-toggle-bar">
                    <span style="color: var(--primary-color);">ุงููุถุน ุงูุญุงูู:</span>
                    <span class="status-text" id="sanitation-log-mode-status"></span>
                </div>
                <form id="sanitation-log-form" class="log-form-generic admin-only">
                    <h2>ุฅุถุงูุฉ ุณุฌู ูุธุงูุฉ/ุชุนููู ุฌุฏูุฏ</h2>
                    <div><label for="s-date">ุงูุชุงุฑูุฎ:</label><input type="date" id="s-date" required></div>
                    <div><label for="s-type">ููุน ุงููุทูุฑ:</label><select id="s-type" required><option value="ุณุงุฆู">ุณุงุฆู</option></select></div>
                    <div><label for="s-items">ุงูุฃุฏูุงุช ุงูุชู ุชู ุชุทููุฑูุง:</label><select id="s-items" required><option value="ุฌููุน ุงูุงุฏูุงุช ูุงููุนุฏุงุช ุงููุณุชุฎุฏูู ูู ุงูุนูู ุงูููู">ุฌููุน ุงูุงุฏูุงุช ูุงููุนุฏุงุช ุงููุณุชุฎุฏูู ูู ุงูุนูู ุงูููู</option></select></div>
                    <div><label for="s-time">ููุช ุงูุชุทููุฑ:</label><select id="s-time" required><option value="ูุจู ุงูุนูู">ูุจู ุงูุนูู</option></select></div>
                    <div><label for="s-responsible">ุงููุณุคูู:</label><select id="s-responsible" required><option value="ุตูุงุญ ุตุงุจุฑ">ุตูุงุญ ุตุงุจุฑ</option></select></div>
                    <button type="submit">ุชุณุฌูู ุงูุณุฌู</button>
                </form>
                <h2>ุณุฌูุงุช ุงูุชุนููู ูุงููุธุงูุฉ ุงูุญุงููุฉ</h2>
                <div style="overflow-x: auto;"> 
                    <table id="sanitation-log-table" class="log-table-generic">
                        <thead>
                            <tr>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ููุน ุงููุทูุฑ</th>
                                <th>ุงูุฃุฏูุงุช ุงููุทูุฑุฉ</th>
                                <th>ููุช ุงูุชุทููุฑ</th>
                                <th>ุงููุณุคูู</th>
                                <th class="action-cell admin-only">ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody id="sanitation-log-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="oil-disposal-log" class="log-page">
                <button class="back-to-menu-btn" onclick="navigateToLog('main-page')">ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
                <div class="mode-toggle-bar">
                    <span style="color: var(--primary-color);">ุงููุถุน ุงูุญุงูู:</span>
                    <span class="status-text" id="oil-disposal-log-mode-status"></span>
                </div>
                <form id="oil-disposal-log-form" class="log-form-generic admin-only">
                    <h2>ุฅุถุงูุฉ ุณุฌู ุฅุนุฏุงู ุฒูุช ุฌุฏูุฏ</h2>
                    <div><label for="o-date">ุงูุชุงุฑูุฎ:</label><input type="date" id="o-date" required></div>
                    <div><label for="o-quantity">ูููุฉ ุงูุฒูุช ุงููุนุฏู (ุจุงููุชุฑ):</label><input type="number" id="o-quantity" required min="1" placeholder="ุจุงููุชุฑ"></div>
                    <button type="submit">ุชุณุฌูู ุงูุณุฌู</button>
                </form>
                <h2>ุณุฌูุงุช ุฅุนุฏุงู ุงูุฒูุช ุงูุญุงููุฉ</h2>
                <div style="overflow-x: auto;"> 
                    <table id="oil-disposal-log-table" class="log-table-generic">
                        <thead>
                            <tr>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ูููุฉ ุงูุฒูุช ุงููุนุฏู (ุจุงููุชุฑ)</th>
                                <th class="action-cell admin-only">ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody id="oil-disposal-log-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="receipt-log" class="log-page">
                <button class="back-to-menu-btn" onclick="navigateToLog('main-page')">ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
                <div class="mode-toggle-bar">
                    <span style="color: var(--primary-color);">ุงููุถุน ุงูุญุงูู:</span>
                    <span class="status-text" id="receipt-log-mode-status"></span>
                </div>
                <form id="receipt-log-form" class="log-form-generic admin-only">
                    <h2>ุฅุถุงูุฉ ุณุฌู ุงุณุชูุงู ุจุถุงุฆุน ุฌุฏูุฏ</h2>
                    <div><label for="r-date">ุชุงุฑูุฎ ุงูุงุณุชูุงู:</label><input type="date" id="r-date" required></div>
                    <div><label for="r-product">ููุน ุงูููุชุฌ:</label><select id="r-product" required><option value="ูุญูู ุจุฑุงุฒููู">ูุญูู ุจุฑุงุฒููู</option><option value="ูุจุฏู ุงูุฑููู">ูุจุฏู ุงูุฑููู</option><option value="ุณุฌู ูุชุจู">ุณุฌู ูุชุจู</option></select></div>
                    <div><label for="r-temp">ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ:</label><input type="number" id="r-temp" required placeholder="ุจุงูุฏุฑุฌุฉ ุงููุฆููุฉ"></div>
                    <div><label for="r-inspection">ุงููุดู ุงูุทุจู ุงูุธุงูุฑู:</label><select id="r-inspection" required><option value="ุจุงููุดู ุงูุทุจู ุงูุธุงูุฑู ุชุจูู ุงููุง ุตุงูุญู ููุงุณุชููุงู ุงูุงุฏูู ููุญุชูุธู ุจุฎูุงุตูุง ุงูุทุจูุนูู">ุจุงููุดู ุงูุทุจู ุงูุธุงูุฑู ุชุจูู ุงููุง ุตุงูุญู ููุงุณุชููุงู ุงูุงุฏูู ููุญุชูุธู ุจุฎูุงุตูุง ุงูุทุจูุนูู</option></select></div>
                    <button type="submit">ุชุณุฌูู ุงูุณุฌู</button>
                </form>
                <h2>ุณุฌูุงุช ูุฑุงูุจุฉ ุงูุงุณุชูุงู ุงูุญุงููุฉ</h2>
                <div style="overflow-x: auto;"> 
                    <table id="receipt-log-table" class="log-table-generic">
                        <thead>
                            <tr>
                                <th>ุชุงุฑูุฎ ุงูุงุณุชูุงู</th>
                                <th>ููุน ุงูููุชุฌ</th>
                                <th>ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ</th>
                                <th>ุงููุดู ุงูุทุจู ุงูุธุงูุฑู ุนูู ุงูููุชุฌ</th>
                                <th class="action-cell admin-only">ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody id="receipt-log-body"></tbody>
                    </table>
                </div>
            </div>
            
            <div id="car-temp-log" class="log-page">
                <button class="back-to-menu-btn" onclick="navigateToLog('main-page')">ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
                <div class="mode-toggle-bar">
                    <span style="color: var(--primary-color);">ุงููุถุน ุงูุญุงูู:</span>
                    <span class="status-text" id="car-temp-log-mode-status"></span>
                </div>
                <form id="car-temp-log-form" class="log-form-generic admin-only">
                    <h2>ุฅุถุงูุฉ ุณุฌู ุญุฑุงุฑุฉ ุณูุงุฑุฉ ุฌุฏูุฏ</h2>
                    <div><label for="ct-date">ุงูุชุงุฑูุฎ:</label><input type="date" id="ct-date" required></div>
                    <div><label for="ct-temp">ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุงูุณูุงุฑุฉ:</label><input type="number" id="ct-temp" required placeholder="ุจุงูุฏุฑุฌุฉ ุงููุฆููุฉ"></div>
                    <button type="submit">ุชุณุฌูู ุงูุณุฌู</button>
                </form>
                <h2>ุณุฌูุงุช ุฏุฑุฌุงุช ุญุฑุงุฑุฉ ุงูุณูุงุฑุฉ ุงูุญุงููุฉ</h2>
                <div style="overflow-x: auto;"> 
                    <table id="car-temp-log-table" class="log-table-generic">
                        <thead>
                            <tr>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุงูุณูุงุฑุฉ</th>
                                <th class="action-cell admin-only">ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody id="car-temp-log-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="lectures-log" class="log-page">
                <button class="back-to-menu-btn" onclick="navigateToLog('main-page')">ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
                <div class="mode-toggle-bar">
                    <span style="color: var(--primary-color);">ุงููุถุน ุงูุญุงูู:</span>
                    <span class="status-text" id="lectures-log-mode-status"></span>
                </div>
                <form id="lectures-log-form" class="log-form-generic admin-only">
                    <h2>ุฅุถุงูุฉ ุณุฌู ูุญุงุถุฑุฉ ุฌุฏูุฏ</h2>
                    <div><label for="l-date">ุงูุชุงุฑูุฎ:</label><input type="date" id="l-date" required></div>
                    <div><label for="l-type">ููุน ุงููุญุงุถุฑุฉ:</label>
                        <select id="l-type" required>
                            <option value="ุงููุธุงูู ุงูุนุงูู">ุงููุธุงูู ุงูุนุงูู</option>
                            <option value="ุงูุชุทููุฑ ูุงูุชุนููู">ุงูุชุทููุฑ ูุงูุชุนููู</option>
                            <option value="ููููู ุงุณุชูุงู ุงููุญูู">ููููู ุงุณุชูุงู ุงููุญูู</option>
                            <option value="ุงูุชุนุงูู ูุน ุงูุงุตุงุจู ุงุซูุงุก ุงูุนูู">ุงูุชุนุงูู ูุน ุงูุงุตุงุจู ุงุซูุงุก ุงูุนูู</option>
                            <option value="ุชุนููู ุงููุนุฏุงุช ุนูุฏ ุงูุนูู">ุชุนููู ุงููุนุฏุงุช ุนูุฏ ุงูุนูู</option>
                            <option value="ุงููุธุงูู ุงูุนุงูู ููููุงู ูุงูุชุทููุฑ">ุงููุธุงูู ุงูุนุงูู ููููุงู ูุงูุชุทููุฑ</option>
                            <option value="ูุธุงูู ุงูุงูุฑุงุฏ ูุงูุชุนุงูู ูุน ุงูุญุงูุงุช ุงููุฑุถูู">ูุธุงูู ุงูุงูุฑุงุฏ ูุงูุชุนุงูู ูุน ุงูุญุงูุงุช ุงููุฑุถูู</option>
                            <option value="ูุฑุงุฌุนู ูู ูุง ุณุจู">ูุฑุงุฌุนู ูู ูุง ุณุจู</option>
                        </select>
                    </div>
                    <div><label for="l-lecturer">ุงููุฏุฑุจ/ุงููุญุงุถุฑ:</label><select id="l-lecturer" required><option value="ุฏ.ุงููุงู">ุฏ.ุงููุงู</option></select></div>
                    <button type="submit">ุชุณุฌูู ุงูุณุฌู</button>
                </form>
                <h2>ุณุฌูุงุช ุงููุญุงุถุฑุงุช ุงูุญุงููุฉ</h2>
                <div style="overflow-x: auto;"> 
                    <table id="lectures-log-table" class="log-table-generic">
                        <thead>
                            <tr>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ููุน ุงููุญุงุถุฑุฉ</th>
                                <th>ุงููุฏุฑุจ/ุงููุญุงุถุฑ</th>
                                <th class="action-cell admin-only">ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody id="lectures-log-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="thawing-log" class="log-page">
                <button class="back-to-menu-btn" onclick="navigateToLog('main-page')">ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
                <div class="mode-toggle-bar">
                    <span style="color: var(--primary-color);">ุงููุถุน ุงูุญุงูู:</span>
                    <span class="status-text" id="thawing-log-mode-status"></span>
                </div>
                <form id="thawing-log-form" class="log-form-generic admin-only">
                    <h2>ุฅุถุงูุฉ ุณุฌู ุชุณููุญ ูุญูุฉ ุฌุฏูุฏ</h2>
                    <div><label for="t-date">ุงูุชุงุฑูุฎ:</label><input type="date" id="t-date" required></div>
                    <div><label for="t-type">ููุน ุงููุญูุฉ:</label><input type="text" id="t-type" required placeholder="ูุซุงู: ุฏุฌุงุฌุ ูุญู ุจูุฑู"></div>
                    <div><label for="t-number">ุฑูู ุงูุซูุงุฌุฉ:</label><input type="number" id="t-number" required min="1" placeholder="ูุซุงู: 1"></div>
                    <div><label for="t-temp">ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ:</label><input type="number" id="t-temp" required placeholder="ุจุงูุฏุฑุฌุฉ ุงููุฆููุฉ"></div>
                    <div><label for="t-notes">ููุงุญุธุงุช:</label><input type="text" id="t-notes" placeholder="ููุงุญุธุงุช ุฅุถุงููุฉ"></div>
                    <button type="submit">ุชุณุฌูู ุงูุณุฌู</button>
                </form>
                <h2>ุณุฌูุงุช ุชุณููุญ ุงููุญูุฉ ุงูุญุงููุฉ</h2>
                <div style="overflow-x: auto;"> 
                    <table id="thawing-log-table" class="log-table-generic">
                        <thead>
                            <tr>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ููุน ุงููุญูุฉ</th>
                                <th>ุฑูู ุงูุซูุงุฌุฉ</th>
                                <th>ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ</th>
                                <th>ููุงุญุธุงุช</th>
                                <th class="action-cell admin-only">ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody id="thawing-log-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="medical-log" class="log-page">
                <button class="back-to-menu-btn" onclick="navigateToLog('main-page')">ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
                <div class="mode-toggle-bar">
                    <span style="color: var(--primary-color);">ุงููุถุน ุงูุญุงูู:</span>
                    <span class="status-text" id="medical-log-mode-status"></span>
                </div>
                <form id="medical-log-form" class="log-form-generic admin-only">
                    <h2>ุฅุถุงูุฉ ุณุฌู ุญุงูุฉ ูุฑุถูุฉ ุฌุฏูุฏุฉ</h2>
                    <div><label for="m-date">ุงูุชุงุฑูุฎ:</label><input type="date" id="m-date" required></div>
                    <div><label for="m-name">ุงุณู ุงูุญุงูุฉ:</label><input type="text" id="m-name" required placeholder="ุงุณู ุงูููุธู"></div>
                    <div><label for="m-symptoms">ุงูุฃุนุฑุงุถ:</label><input type="text" id="m-symptoms" required placeholder="ูุฒูุฉ ุจุฑุฏุ ูุบุต.."></div>
                    <button type="submit">ุชุณุฌูู ุงูุณุฌู</button>
                </form>
                <h2>ุณุฌูุงุช ุงูุญุงูุงุช ุงููุฑุถูุฉ ุงูุญุงููุฉ</h2>
                <div style="overflow-x: auto;"> 
                    <table id="medical-log-table" class="log-table-generic">
                        <thead>
                            <tr>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุงุณู ุงูุญุงูุฉ</th>
                                <th>ุงูุฃุนุฑุงุถ</th>
                                <th class="action-cell admin-only">ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody id="medical-log-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="returns-log" class="log-page">
                <button class="back-to-menu-btn" onclick="navigateToLog('main-page')">ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
                <div class="mode-toggle-bar">
                    <span style="color: var(--primary-color);">ุงููุถุน ุงูุญุงูู:</span>
                    <span class="status-text" id="returns-log-mode-status"></span>
                </div>
                <form id="returns-log-form" class="log-form-generic admin-only">
                    <h2>ุฅุถุงูุฉ ุณุฌู ูุฑุชุฌุน ุฌุฏูุฏ</h2>
                    <div><label for="ret-date">ุงูุชุงุฑูุฎ:</label><input type="date" id="ret-date" required></div>
                    <div><label for="ret-product">ููุน ุงูููุชุฌ ุงููุฑุชุฌุน ุฅูู ุงูุชุงุฌุฑ/ุงูููุฑุฏ:</label><input type="text" id="ret-product" required placeholder="ุงุณู ุงูููุชุฌ ูุงููููุฉ"></div>
                    <button type="submit">ุชุณุฌูู ุงูุณุฌู</button>
                </form>
                <h2>ุณุฌูุงุช ุงููุฑุชุฌุนุงุช ุงูุญุงููุฉ</h2>
                <div style="overflow-x: auto;"> 
                    <table id="returns-log-table" class="log-table-generic">
                        <thead>
                            <tr>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ููุน ุงูููุชุฌ ุงููุฑุชุฌุน ุฅูู ุงูุชุงุฌุฑ/ุงูููุฑุฏ</th>
                                <th class="action-cell admin-only">ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody id="returns-log-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="visitor-survey" class="log-page">
                <button class="back-to-menu-btn" onclick="navigateToLog('main-page')">ุงูุนูุฏุฉ ูููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
                <div class="mode-toggle-bar">
                    <span style="color: var(--primary-color);">ุงููุถุน ุงูุญุงูู:</span>
                    <span class="status-text" id="visitor-survey-mode-status"></span>
                </div>
                
                <form id="visitor-survey-form" class="log-form-generic admin-only" style="display: block; grid-template-columns: 1fr;">
                    <h2>ุงุณุชุจูุงู ุตุญุฉ ุงูุฒุงุฆุฑูู (ูุฌุจ ููุคู ูู ูุจู ุงูุฒุงุฆุฑ ููุท)</h2>
                    <div id="visitor-form">
                        <div class="visitor-info-row">
                            <label for="vs-name">ุงูุงุณู:</label><input type="text" id="vs-name" required>
                            <label for="vs-date">ุชุงุฑูุฎ ุงูุฒูุงุฑุฉ:</label><input type="date" id="vs-date" required>
                            <label for="vs-purpose">ุงูุบุฑุถ ูู ุงูุฒูุงุฑุฉ:</label><input type="text" id="vs-purpose" required>
                            <label for="vs-institution">ุงููุคุณุณุฉ ุงูุชุงุจุนุฉ ููุง:</label><input type="text" id="vs-institution" required>
                        </div>

                        <div class="visitor-symptoms-section">
                            <h3>ุงูุณุคุงู: ุฎูุงู ุงูู 48 ุณุงุนุฉ ุงูุฃุฎูุฑุฉุ ูู ุดุนุฑุช ุจุฃุญุฏ ุงูุฃุนุฑุงุถ ุงูุชุงููุฉุ</h3>
                            <div style="overflow-x: auto;"> 
                                <table class="symptom-table">
                                    <thead>
                                        <tr>
                                            <th>ุงูุนุฑุถ</th>
                                            <th>ูุนู</th>
                                            <th>ูุง</th>
                                            <th>ุงูุณุคุงู</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>ูุฐูุงู</td><td><input type="radio" name="symptom1" value="ูุนู" required></td><td><input type="radio" name="symptom1" value="ูุง"></td><td>ูู ุชุนุงูู ูู ุงูููุช ุงูุญุงูู ูู ุงูุชูุงุจ ุงูุญูู ุฃู ุงุฑุชูุงุน ุจุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉุ</td></tr>
                                        <tr><td>ููุก</td><td><input type="radio" name="symptom2" value="ูุนู" required></td><td><input type="radio" name="symptom2" value="ูุง"></td><td>ูู ุชุนุงูู ูู ุงูููุช ุงูุญุงูู ูู ูุญุฉ ุฅูุชุงุฌูุฉ ุฃู ุนุทุณุ</td></tr>
                                        <tr><td>ุฅุณูุงู</td><td><input type="radio" name="symptom3" value="ูุนู" required></td><td><input type="radio" name="symptom3" value="ูุง"></td><td>ูู ุชุนุงูู ูู ุงูููุช ุงูุญุงูู ูู ุฅูุฑุงุฒุงุช ูู ุงูุนูู ุฃู ุงูุฃุฐู ุฃู ุงูููุ</td></tr>
                                        <tr><td></td><td></td><td></td><td>ูู ุชุนุงูู ุญุงูููุง ุฃู ุนุงููุช ุฎูุงู ุงูุฃูุงู ุงูุณุจุนุฉ ุงููุงุถูุฉ ูู ุงูุชูุงุจ ุงููุจุฏ ุฃู ุงููุฑูุงูุ</td></tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="visitor-declaration">
                            <p>ุฃูุฑ ุจุฃู ุงูุฅุฌุงุจุงุช ุนูู ูุฐู ุงูุฃุณุฆูุฉ ูุงููุนูููุงุช ุงูุฅุถุงููุฉ ุงูููุฏูุฉ ุฏูููุฉ ุญุณุจ ุฃูุถู ูุนุฑูุชู ูุฃูุงูู ุนูู ุฅุจูุงุบ ูุฑุดุฏ ุงูุฒูุงุฑุฉ ุฅุฐุง ุนุงููุช ูู ุฃู ูู ุงูุฃุนุฑุงุถ ุงููุฐููุฑุฉ ุฃุนูุงู ุฃุซูุงุก ุงูุฒูุงุฑุฉ:</p>
                            <label for="vs-signature">ุงูุชูููุน:</label><input type="text" id="vs-signature" placeholder="ุชูููุน ุงูุฒุงุฆุฑ (ูุชุงุจุฉ ุงูุงุณู)">
                            <label for="vs-signature-date">ุงูุชุงุฑูุฎ:</label><input type="date" id="vs-signature-date" required>
                        </div>

                        <button type="submit" style="grid-column: span 2;">ุชุณุฌูู ุจูุงูุงุช ุงูุฒุงุฆุฑ</button>
                    </div>
                </form>
                
                <h2>ุณุฌูุงุช ุงูุฒุงุฆุฑูู ุงููุณุฌููู</h2>
                <div style="overflow-x: auto;"> 
                    <table id="visitor-survey-table" class="log-table-generic">
                        <thead>
                            <tr>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุงูุงุณู</th>
                                <th>ุงูุบุฑุถ ูู ุงูุฒูุงุฑุฉ</th>
                                <th>ุงูุฃุนุฑุงุถ (ููุฎุต)</th>
                                <th class="action-cell admin-only">ุญุฐู</th>
                            </tr>
                        </thead>
                        <tbody id="visitor-survey-body"></tbody>
                    </table>
                </div>
            </div>

            <div id="infoModal" class="modal">
                <div class="modal-content">
                    <span class="close-btn" onclick="closeModal()">&times;</span>
                    <h3 id="modal-title" style="color: var(--secondary-color);"></h3>
                    <p id="modal-text" style="line-height: 1.8;"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // =============================================
        //              JAVASCRIPT LOGIC
        // =============================================

        const ADMIN_PASSWORD = '111975'; 
        
        let isGlobalAdminMode = false; 

        const LOG_KEYS = {
            'fridge-temp-log': 'fridgeTempLog',
            'cooked-log': 'cookedLog',
            'sanitation-log': 'sanitationLog',
            'oil-disposal-log': 'oilDisposalLog',
            'receipt-log': 'receiptLog',
            'car-temp-log': 'carTempLog',
            'lectures-log': 'lecturesLog',
            'thawing-log': 'thawingLog',
            'medical-log': 'medicalLog',
            'returns-log': 'returnsLog',
            'visitor-survey': 'visitorSurvey'
        };

        const logs = {};

        Object.keys(LOG_KEYS).forEach(logId => {
            logs[logId] = JSON.parse(localStorage.getItem(LOG_KEYS[logId])) || [];
        });

        // --- Core Functions ---

        function saveLogs(logId) {
            localStorage.setItem(LOG_KEYS[logId], JSON.stringify(logs[logId]));
        }

        function deleteLogEntry(logId, index) {
            if (confirm(`ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงูุณุฌูุ`)) {
                logs[logId].splice(index, 1); 
                saveLogs(logId);
                renderLogs(logId);
            }
        }
        
        // --- Modal Functions ---

        const modal = document.getElementById("infoModal");
        const modalTitle = document.getElementById("modal-title");
        const modalText = document.getElementById("modal-text");

        const MODAL_MESSAGES = {
            'cooked-log': {
                title: "๐ ููุงุญุธุฉ ูุงูุฉ: ูุฏุฉ ุตูุงุญูุฉ ุงูููุชุฌุงุช",
                text: "ุฌููุน ุงูููุชุฌุงุช **ุงููุทููุฉ ูุงููุฌูุฒุฉ ูุงููุชุจูุฉ** ุชููู ูุฏุฉ ุตูุงุญูุชูุง **3 ุฃูุงู** ูู ุชุงุฑูุฎ ุงูุทูู ุฃู ุงูุชุฌููุฒ ุฃู ุงูุชุชุจูู."
            },
            'sanitation-log': {
                title: "๐ ููุงุญุธุฉ: ูุงุฏุฉ ุงูุชุทููุฑ ุงููุณุชุฎุฏูุฉ",
                text: "ุงููุทูุฑ ุงููุนุชูุฏ ููุงุณุชุฎุฏุงู ูู **GALDOMISH**."
            },
            'lectures-log': {
                title: "๐ ููุงุญุธุฉ: ูุญุชูู ุงููุญุงุถุฑุงุช",
                text: "ุชูุฏู ุงููุญุงุถุฑุงุช ุฅูู ุชุฏุฑูุจ ุงูุนูุงู ุนูู: **ุงููุธุงูุฉ ุงูุนุงูุฉ ูุงูุดุฎุตูุฉุ ุงูุชุทููุฑ ูุงูุชุนููู**ุ ููุงูุฉ ุงูุฅุฌุฑุงุกุงุช ุงูุตุญูุฉ."
            }
        };

        function showModal(logId) {
            const message = MODAL_MESSAGES[logId];
            if (message) {
                modalTitle.textContent = message.title;
                modalText.innerHTML = message.text;
                modal.style.display = "block";
            }
        }

        function closeModal() {
            modal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == modal) {
                closeModal();
            }
        }

        // --- Login & Mode Management ---
        
        function promptAdminLogin(is_admin_mode) {
            if (is_admin_mode) {
                const password = prompt('ุงูุฑุฌุงุก ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ ูุฏุฎูู ูุถุน ุงูุฅุฏุงุฑุฉ:');
                if (password === ADMIN_PASSWORD) {
                    startApp(true);
                } else if (password !== null) {
                    alert('ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ. ุณูุชู ุงูุฏุฎูู ูุฒุงุฆุฑ.');
                    startApp(false);
                }
            } else {
                startApp(false);
            }
        }

        function startApp(is_admin) {
            isGlobalAdminMode = is_admin;
            
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('app-container').style.display = 'flex';
            
            navigateToLog('main-page'); 
        }

        /**
         * ุชููู ุงููุณุชุฎุฏู ุฅูู ุดุงุดุฉ ุชุณุฌูู ุงูุฏุฎูู
         */
        function logout() {
            isGlobalAdminMode = false;
            document.getElementById('app-container').style.display = 'none';
            document.getElementById('login-screen').style.display = 'flex';
            // ุฅุฎูุงุก ุงูู modal ุฅุฐุง ูุงู ููุชูุญุงู
            closeModal();
        }


        function navigateToLog(pageId) {
            document.getElementById('main-page').style.display = 'none';
            document.querySelectorAll('.log-page').forEach(page => {
                page.style.display = 'none';
            });
            
            document.getElementById(pageId).style.display = 'block';

            if (pageId !== 'main-page') {
                applyGlobalMode(pageId); 
                showModal(pageId); 
            }
        }
        
        function applyGlobalMode(logId) {
            const is_admin = isGlobalAdminMode;
            
            const statusText = document.getElementById(`${logId}-mode-status`);
            const form = document.getElementById(`${logId}-form`);
            
            if (statusText) {
                statusText.textContent = is_admin ? 'ุฅุฏุงุฑุฉ (ุฅุถุงูุฉ ูุญุฐู)' : 'ุฒุงุฆุฑ (ูุฑุงุกุฉ ููุท)';
                statusText.style.color = is_admin ? 'var(--danger-color)' : 'var(--success-color)';
            }
            
            if (form) {
                const displayStyle = (logId === 'visitor-survey' ? 'block' : 'grid');
                form.style.display = is_admin ? displayStyle : 'none';
            }
            
            renderLogs(logId);
        }


        // --- Rendering Logic ---

        function renderLogs(logId) {
            const tbody = document.getElementById(`${logId}-body`);
            tbody.innerHTML = '';
            
            const currentLogs = logs[logId];
            const isAdmin = isGlobalAdminMode; 

            const headerRow = document.querySelector(`#${logId}-table thead tr`);
            if (headerRow) {
                const lastHeader = headerRow.cells[headerRow.cells.length - 1];
                lastHeader.style.display = isAdmin ? 'table-cell' : 'none';
            }

            currentLogs.forEach((log, index) => {
                const row = tbody.insertRow();
                
                let data = [];
                switch(logId) {
                    case 'fridge-temp-log':
                        data = [log.date, log.number, `${log.start}ยฐ`, `${log.end}ยฐ`, log.notes];
                        break;
                    case 'cooked-log':
                        data = [log.date, log.product, log.status, `${log.fireTemp}ยฐ`, `${log.fridgeTemp}ยฐ`, log.inspector];
                        break;
                    case 'sanitation-log':
                        data = [log.date, log.type, log.items, log.time, log.responsible];
                        break;
                    case 'oil-disposal-log':
                        data = [log.date, `${log.quantity} ูุชุฑ`];
                        break;
                    case 'receipt-log':
                        data = [log.date, log.product, `${log.temp}ยฐ`, log.inspection];
                        break;
                    case 'car-temp-log':
                        data = [log.date, `${log.temp}ยฐ`];
                        break;
                    case 'lectures-log':
                        data = [log.date, log.type, log.lecturer];
                        break;
                    case 'thawing-log':
                        data = [log.date, log.type, log.number, `${log.temp}ยฐ`, log.notes];
                        break;
                    case 'medical-log':
                        data = [log.date, log.name, log.symptoms];
                        break;
                    case 'returns-log':
                        data = [log.date, log.product];
                        break;
                    case 'visitor-survey':
                        let summary = log.symptoms.includes('ูุนู') ? 'โ๏ธ ูุนู (ุฎุทุฑ)' : 'โ ูุง';
                        data = [log.date, log.name, log.purpose, summary];
                        break;
                }
                
                data.forEach(text => {
                    row.insertCell().textContent = text;
                });

                const actionCell = row.insertCell();
                actionCell.classList.add('action-cell');
                
                if (isAdmin) {
                    const deleteButton = document.createElement('button');
                    deleteButton.textContent = 'ุญุฐู';
                    deleteButton.classList.add('delete-btn');
                    deleteButton.onclick = () => deleteLogEntry(logId, index);
                    actionCell.appendChild(deleteButton);
                } else {
                     actionCell.style.display = 'none'; 
                }
            });
        }
        
        // --- Form Submission Handlers ---
        
        function setupLogForm(logId, getNewLogData) {
            const form = document.getElementById(`${logId}-form`);
            if (!form) return;

            form.addEventListener('submit', function(e) {
                e.preventDefault(); 
                if (!isGlobalAdminMode) return; 

                const newLog = getNewLogData(this);
                logs[logId].push(newLog);
                saveLogs(logId);
                renderLogs(logId);
                this.reset();
                if(logId === 'visitor-survey') {
                    this.querySelectorAll('input[type="radio"]').forEach(radio => radio.checked = false);
                }
            });
        }

        // 1. ุณุฌู ููุงุณ ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุงูุซูุงุฌุงุช
        setupLogForm('fridge-temp-log', (form) => ({
            date: form.querySelector('#ft-date').value,
            number: form.querySelector('#ft-number').value,
            start: form.querySelector('#ft-start').value,
            end: form.querySelector('#ft-end').value,
            notes: form.querySelector('#ft-notes').value,
        }));

        // 2. ุณุฌู ุงููุทูู ูุงููุฌูุฒ ูุงููุชุจู
        setupLogForm('cooked-log', (form) => ({
            date: form.querySelector('#c-date').value,
            product: form.querySelector('#c-product').value,
            status: form.querySelector('#c-status').value,
            fireTemp: form.querySelector('#c-fire-temp').value,
            fridgeTemp: form.querySelector('#c-fridge-temp').value,
            inspector: form.querySelector('#c-inspector').value,
        }));

        // 3. ุณุฌู ุชูุธูู ูุชุนููู ุงููุนุฏุงุช
        setupLogForm('sanitation-log', (form) => ({
            date: form.querySelector('#s-date').value,
            type: form.querySelector('#s-type').value,
            items: form.querySelector('#s-items').value,
            time: form.querySelector('#s-time').value,
            responsible: form.querySelector('#s-responsible').value,
        }));

        // 4. ุณุฌู ุฅุนุฏุงู ุงูุฒูุช
        setupLogForm('oil-disposal-log', (form) => ({
            date: form.querySelector('#o-date').value,
            quantity: form.querySelector('#o-quantity').value,
        }));

        // 5. ุณุฌู ูุฑุงูุจุฉ ุงูุงุณุชูุงู
        setupLogForm('receipt-log', (form) => ({
            date: form.querySelector('#r-date').value,
            product: form.querySelector('#r-product').value,
            temp: form.querySelector('#r-temp').value,
            inspection: form.querySelector('#r-inspection').value,
        }));

        // 6. ุณุฌู ููุงุณ ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุงูุณูุงุฑุฉ
        setupLogForm('car-temp-log', (form) => ({
            date: form.querySelector('#ct-date').value,
            temp: form.querySelector('#ct-temp').value,
        }));
        
        // 7. ุณุฌู ุงููุญุงุถุฑุงุช
        setupLogForm('lectures-log', (form) => ({
            date: form.querySelector('#l-date').value,
            type: form.querySelector('#l-type').value,
            lecturer: form.querySelector('#l-lecturer').value,
        }));

        // 8. ุณุฌู ุชุณููุญ ุงููุญูุฉ ููุชุดุบูู
        setupLogForm('thawing-log', (form) => ({
            date: form.querySelector('#t-date').value,
            type: form.querySelector('#t-type').value,
            number: form.querySelector('#t-number').value,
            temp: form.querySelector('#t-temp').value,
            notes: form.querySelector('#t-notes').value,
        }));

        // 9. ุณุฌู ุงูุญุงูุงุช ุงููุฑุถูุฉ
        setupLogForm('medical-log', (form) => ({
            date: form.querySelector('#m-date').value,
            name: form.querySelector('#m-name').value,
            symptoms: form.querySelector('#m-symptoms').value,
        }));
        
        // 10. ุณุฌู ุงููุฑุชุฌุนุงุช
        setupLogForm('returns-log', (form) => ({
            date: form.querySelector('#ret-date').value,
            product: form.querySelector('#ret-product').value,
        }));

        // 11. ุงุณุชุจูุงู ุตุญุฉ ุงูุฒุงุฆุฑูู 
        setupLogForm('visitor-survey', (form) => {
            const symptoms = [];
            let hadSymptoms = false;
            
            form.querySelectorAll('.symptom-table tr').forEach((row, index) => {
                if (index > 0) { 
                    const symptomRadios = row.querySelectorAll(`input[name="symptom${index}"]`);
                    symptomRadios.forEach(radio => {
                        if (radio.checked) {
                            symptoms.push(radio.value);
                            if (radio.value === 'ูุนู') hadSymptoms = true;
                        }
                    });
                }
            });
            
            return {
                date: form.querySelector('#vs-date').value,
                name: form.querySelector('#vs-name').value,
                purpose: form.querySelector('#vs-purpose').value,
                institution: form.querySelector('#vs-institution').value,
                symptoms: hadSymptoms ? 'ูุนู (ุฃุนุฑุงุถ)' : 'ูุง',
                fullSymptoms: symptoms.join(', '), 
                signature: form.querySelector('#vs-signature').value,
                signatureDate: form.querySelector('#vs-signature-date').value
            };
        });

        // =================================================================
        // PWA: ููุทู ุชุณุฌูู Manifest ู Service Worker ุจุงุณุชุฎุฏุงู Blob URLs
        // =================================================================
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('login-screen').style.display = 'flex'; 
            document.getElementById('app-container').style.display = 'none';

            if ('serviceWorker' in navigator) {
                // 1. ุชูููุฏ Manifest (ููู ุงูุจูุงู) ุจุงุณุชุฎุฏุงู Blob URL
                const MANIFEST_CONTENT = JSON.stringify({
                    "name": "ุณุฌูุงุช ุงููุทุจุฎ ุงูุฑุฆูุณู",
                    "short_name": "ุงููุทุจุฎ ุงูุฑุฆูุณู",
                    "description": "ุณุฌูุงุช ุงููุทุจุฎ ุงูุฑุฆูุณู",
                    "start_url": ".",
                    "display": "standalone",
                    "background_color": "#ffffff",
                    "theme_color": "#007bff",
                    "icons": [
                        {"src": "https://i.ibb.co/0jRJCBmL/111.jpg", "sizes": "192x192", "type": "image/jpeg"},
                        {"src": "https://i.ibb.co/0jRJCBmL/111.jpg", "sizes": "512x512", "type": "image/jpeg"}
                    ]
                });
                const manifestBlob = new Blob([MANIFEST_CONTENT], {type: 'application/json'});
                const manifestURL = URL.createObjectURL(manifestBlob);

                const manifestLink = document.createElement('link');
                manifestLink.rel = 'manifest';
                manifestLink.href = manifestURL;
                document.head.appendChild(manifestLink);
                
                // 2. ููุฏ Service Worker
                const SW_CODE = `
                    const CACHE_NAME = 'records-v1';
                    const urlsToCache = [
                        'https://i.ibb.co/0jRJCBmL/111.jpg',
                        'https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap'
                    ];

                    self.addEventListener('install', event => {
                      event.waitUntil(
                        caches.open(CACHE_NAME).then(cache => cache.addAll(urlsToCache)).catch(err => {
                            console.error('Failed to cache assets:', err);
                        })
                      );
                      self.skipWaiting();
                    });

                    self.addEventListener('activate', event => {
                        event.waitUntil(
                            caches.keys().then(cacheNames => Promise.all(
                                cacheNames.filter(name => name !== CACHE_NAME).map(name => caches.delete(name))
                            ))
                        );
                        self.clients.claim();
                    });

                    self.addEventListener('fetch', event => {
                      event.respondWith(
                        caches.match(event.request).then(response => response || fetch(event.request))
                      );
                    });
                `;

                // 3. ุชุณุฌูู Service Worker
                const swBlob = new Blob([SW_CODE], { type: 'application/javascript' });
                const swURL = URL.createObjectURL(swBlob);

                navigator.serviceWorker.register(swURL, { scope: './' })
                .then(reg => {
                    console.log('Service Worker registered from Blob!', reg);
                    URL.revokeObjectURL(swURL); 
                })
                .catch(err => console.error('Service Worker registration failed:', err));
            }
        });
    </script>
</body>
</html>
